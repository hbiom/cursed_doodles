<div class = "edt">
  <h1> <%= @event.name.capitalize() %> </h1>
  <div class = "edt-header">
    <p> by <%=@event.users.first.name %> </p> <p> <i class="fas fa-circle" style="color:gray;font-size:10px"> </span> </i></p>
    <p> <%= ((Time.now - @event.created_at )/6000).round() %> mins ago<p> <i class="fas fa-circle" style="color:gray;font-size:10px"> </span> </i></p>
    <p> <%= "Print" %></p>
  </div>

  <div class = "edt-info">
   <div class="edt-info-container">
      <p> <i class="fas fa-map-marker" style="color:gray"></i> </p> <p> <%= @event.place %></p>
    </div>
   <div class="edt-info-container">
      <p> <i class="fas fa-align-justify" style="color:gray"></i> </p>
      <div>
        <p> <%= @event.note %> </p>
      </div>
    </div>
  </div>

  <ul class="tabs">
    <li><%= "Table" %></li>
    <li><%= "Calendar" %></li>
  </ul>

  <div class="table-container scroller">
    <table class="doodles">
      <colgroup>
        <col span="1" class = "wide">
      </colgroup>
      <tr>
        <!-- first Row with Dates -->
        <th></th>
        <% (@event.start_event..@event.end_event).each do |date| %>
          <th>
            <div class="date-cells">
              <p> <%= date.strftime("%B") %></p>
              <span> <%= date.strftime("%d") %> </span>
              <p> <%= date.strftime('%a') %>.</p>
            </div>
          </th>
        <% end %>
      </tr>
      <tr>
        <td>
          <div class = "user-cell">
            <span> <%= @event.users.count %> </span> <p> Participants</p>
          </div>
        </td>
        <% @event.participants.each do |date, number| %>
          <td class="part-number">
            <p> <i class="fas fa-check"></i> <%= number %></p>
          </td>
        <% end %>
      </tr>
        <% unless @users.empty? %>
          <% @users.each do |user| %>
      <tr>
        <td>
          <div class = "user-cell">
           <i class="fas fa-user"></i> <p><%= user.name.capitalize() %></p>
          </div>
        </td>
          <% date_user = [] %>
          <%(user.start..user.end).each do |date| %>
            <% date_user << date %>
          <% end %>

          <% (@event.start_event..@event.end_event).each do |item| %>
            <% if date_user.include?(item) %>
              <td class="here"> <i class="fas fa-check"></i> </td>
            <% else %>
              <td class="nothere"> </td>
            <% end %>
          <% end %>
        <% end %>
      </tr>
      <% end %>
    </table>
    <%= link_to "invite a user", new_event_user_path(@event) %>
  </div>

  <div class="table-container scroller">
      <table class="doodles-calendar">
        <colgroup>
          <col span="1" class = "wide">
        </colgroup>
        <tr>
          <!-- first Row with Dates -->
          <th></th>
          <% (@event.start_event..@event.end_event).each do |date| %>
            <th>
              <div class="date-cells">
                <p> <%= date.strftime("%B") %></p>
                <span> <%= date.strftime("%d") %> </span>
                <p> <%= date.strftime('%a') %>.</p>
              </div>
            </th>
          <% end %>
        </tr>
        <tr>
          <td>
            <div class = "user-cell">
              <p> All day </p>
            </div>
          </td>
          <% @event.participants.each do |date, number| %>
            <td class="part-number-calendar">
              <div class= <%= number == @users.count ? "cal-here" : "cal-nothere"  %> >
                <% if number == @users.count %>
                  <i class="fas fa-check" style="color:#169E1E;font-weight: bold;font-size: 20px"></i>
                <% else %>
                  <i class="fas fa-times" style="color:red;font-weight: bold;font-size: 20px"></i>
                <% end %>
                <p> <i class="fas fa-check"></i> <%= number %></p>
              </div>
            </td>
          <% end %>
        </tr>
      </table>
    </div>
  </div>




</div>

<!-- rails effet tab -->
